function setNewTitle(){titleElement.style.display="none",loaderElement.style.display="block",number=Math.round(Math.random()),0===number?reddit.random("theonion").fetch(function(e){currentArticle=e[0].data.children[0].data,lastFiftyArticles.indexOf(currentArticle.title)>0?setNewTitle():(titleElement.innerHTML=currentArticle.title,lastFiftyArticles.length<50?lastFiftyArticles.push(currentArticle.title):(lastFiftyArticles.shift(),lastFiftyArticles.push(currentArticle.title)),titleElement.style.display="block",loaderElement.style.display="none")}):reddit.random("nottheonion").fetch(function(e){currentArticle=e[0].data.children[0].data,lastFiftyArticles.indexOf(currentArticle.title)>0?setNewTitle():(titleElement.innerHTML=currentArticle.title,lastFiftyArticles.length<50?lastFiftyArticles.push(currentArticle.title):(lastFiftyArticles.shift(),lastFiftyArticles.push(currentArticle.title)),titleElement.style.display="block",loaderElement.style.display="none")})}function storageAvailable(e){try{var t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(i){return!1}}var currentArticle,score=0,onionButton=document.getElementById("onion-button"),notButton=document.getElementById("not-button"),titleElement=document.getElementById("article-title"),scoreElement=document.getElementById("score"),loaderElement=document.getElementById("loader"),highscoreElement=document.getElementById("high-score"),snackbarContainer=document.querySelector("#toast-container"),lastArticleLink=document.getElementById("last-article"),lastFiftyArticles=[],number;if(storageAvailable("localStorage")){var highscore=localStorage.getItem("onion-highscore");highscoreElement.style.display="block",localStorage.getItem("onion-highscore")&&(highscoreElement.innerHTML="High Score: "+highscore)}setNewTitle(),onionButton.addEventListener("click",function(){if(0===number){var e={message:"You got it right!",timeout:1e3};snackbarContainer.MaterialSnackbar.showSnackbar(e),lastArticleLink.href=currentArticle.url,setNewTitle(),score+=1,void 0!==highscore&&score>highscore&&(highscore=score,localStorage.setItem("onion-highscore",highscore),highscoreElement.innerHTML="High Score: "+highscore),scoreElement.innerHTML=score}else{var e={message:"Nope, maybe next time.",timeout:1e3};snackbarContainer.MaterialSnackbar.showSnackbar(e),lastArticleLink.href=currentArticle.url,setNewTitle()}},!1),notButton.addEventListener("click",function(){if(1===number){var e={message:"You got it right!",timeout:1e3};snackbarContainer.MaterialSnackbar.showSnackbar(e),lastArticleLink.href=currentArticle.url,setNewTitle(),score+=1,void 0!==highscore&&score>highscore&&(highscore=score,localStorage.setItem("onion-highscore",highscore),highscoreElement.innerHTML="High Score: "+highscore),scoreElement.innerHTML=score}else{var e={message:"Nope, maybe next time.",timeout:1e3};snackbarContainer.MaterialSnackbar.showSnackbar(e),lastArticleLink.href=currentArticle.url,setNewTitle()}},!1);